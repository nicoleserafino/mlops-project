# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.

steps:
  - task: UsePythonVersion@0
    displayName: 'Setting Python version'
    inputs:
      versionSpec: '3.7'
  - script: |
      ls
      pip install -r ./mlops/azure_devops/templates/aml-python-sdk/requirements.txt
  - task: AzureCLI@2
    displayName: Install AML CLI
    inputs:
      azureSubscription: $(ado_service_connection_aml_ws)
      scriptType: bash
      scriptLocation: inlineScript
      workingDirectory: code/
      inlineScript: |
        set -e # fail on error
        az version
        az extension add -n azure-cli-ml